<%- include('partials/header') %>

<div class="container py-5">
    <div class="card p-4 mb-4">
        <h1 class="text-center mb-4">Create Short URL</h1>
        <form action="/url" method="POST">
            <div class="input-group mb-3">
                <input type="url" class="form-control" name="url" placeholder="Enter your URL" required>
                <button class="btn btn-primary" type="submit">Shorten</button>
            </div>
        </form>
    </div>

    <div class="card p-4">
        <h2 class="mb-4">Your URLs</h2>
        <% if (locals?.urls && urls.length > 0) { %>
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th>Short ID</th>
                            <th>Redirect URL</th>
                            <th>Clicks</th>
                            <th>Created At</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% urls.forEach(url => { %>
                        <tr>
                            <td><a href="/url/<%= url.shortId %>"><%= url.shortId %></a></td>
                            <td><%= url.redirectURL %></td>
                            <td><%= url.visitHistory.length %></td>
                            <td><%= url.createdAt.toLocaleDateString('en-IN') %></td>
                        </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        <% } else { %>
            <div class="alert alert-info">
                No URLs have been created yet. Create your first short URL above!
            </div>
        <% } %>
    </div>
</div>

</body>
</html>
